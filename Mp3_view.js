(()=>{"use strict";const e=window.React,t=window.ReactJSXRuntime,s=({attributes:s,id:r})=>{const{width:i,align:a,brandColor:n,bgColor:l,textColor:o,hoverBgColor:c,hoverTextColor:d,oddBgColor:h,evenBgColor:u,borderRadius:p,alignment:y}=s,[m,f]=(0,e.useState)();return(0,e.useEffect)((()=>{const e="object"==typeof i?`${i.number}${i.unit}`:i,t=`\n    #${r}{\n      display: flex;\n      justify-content: ${y}\n    }\n    \n    #${r} .simplePlaylist {\n      width: ${e}\n    }\n    #${r} .theme-custom .plyr {\n      --plyr-color-main: ${n};\n      --theme-custom-brand-color: ${n};\n    }\n    #${r} .theme-custom {\n      --theme-custom-bg: ${l};\n    --theme-custom-color: ${o};\n    --theme-custom-hover-bg: ${c};\n    --theme-custom-hover-color: ${d};\n    --theme-custom-radius: ${s=p||{},Object.values(s).join(" ")}\n    }\n    #${r} .theme-custom li:nth-child(even) {\n      background-color: ${u};\n    }\n    #${r} .theme-custom li:nth-child(odd) {\n      background-color: ${h};\n    }\n    #${r}.theme-custom li:hover,\n    #${r}.theme-custom li.item-active  {\n      color: ${o};\n    }\n\n    `.replace(/\s+/g," ").trim();var s;f(t)}),[i,r,y,n,l,o,c,d,h,u,p]),(0,t.jsx)("style",{children:m})},r=class{constructor(e,t){this.player=e,this.audios=t,e.elements.container&&(this.shuffle=!1,this.repeat=!1,this.playlistItems=e.elements.container?.querySelectorAll('[data-plyr="playlist-item"]')||[],this.playlistTitle=e.elements.container.querySelector('[data-plyr="playlist-title"]'),this.playlistArtist=e.elements.container.querySelector('[data-plyr="playlist-artist"]'),this.playlistCover=e.elements.container.querySelector('[data-plyr="playlist-cover"]'),this.playlistSeeMoreItems=e.elements.container.querySelector('[data-plyr="playlist-see-more-items"]'),this.nextButton=e.elements.container.querySelector('[data-plyr="next"]'),this.prevButton=e.elements.container.querySelector('[data-plyr="prev"]'),this.seeMoreButton=e.elements.container.querySelector('[data-plyr="see-more"]'),this.shuffleButton=e.elements.container.querySelector('[data-plyr="shuffle"]'),this.repeatButton=e.elements.container.querySelector('[data-plyr="repeat"]'),this.currentIndex=0,this.setupEventListeners(),this.setItemsDuration())}setupEventListeners(){this.playlistItems.forEach(((e,t)=>{e.addEventListener("click",(()=>{this.switchToAudio(t)}))})),this.player.on("ended",(()=>{this.next()})),this.nextButton?.addEventListener("click",(()=>{this.next()})),this.prevButton?.addEventListener("click",(()=>{this.prev()})),this.player.on("play",(()=>{this.playlistItems.forEach(((e,t)=>{t===this.currentIndex?e.classList.add("item-playing"):e.classList.remove("item-playing")}))})),this.player.on("pause",(()=>{this.playlistItems.forEach(((e,t)=>{this.currentIndex,e.classList.remove("item-playing")}))})),this.seeMoreButton?.addEventListener("click",(()=>{this.playlistSeeMoreItems.classList.contains("hidden")?(this.playlistSeeMoreItems.classList.remove("hidden"),this.seeMoreButton.classList.remove("rotate-180")):(this.playlistSeeMoreItems.classList.add("hidden"),this.seeMoreButton.classList.add("rotate-180"))})),this.player.on("ready",(()=>{this.switchToAudio(this.currentIndex,!1)})),this.handleRepeat(),this.handleShuffle()}handleShuffle(){this.shuffleButton?.addEventListener("click",(()=>{this.shuffle=!this.shuffle,this.shuffle?this.shuffleButton.classList.add("active"):this.shuffleButton.classList.remove("active")}))}handleRepeat(){this.repeatButton?.addEventListener("click",(()=>{this.repeat=!this.repeat,this.repeat?this.repeatButton.classList.add("active"):this.repeatButton.classList.remove("active")}))}switchToAudio(e,t=!0){if(e<0||e>=this.audios.length)return;if(this.currentIndex===e&&t)return void(this.player.playing?this.player.pause()?.catch((e=>{console.error("Error playing audio:",e)})):this.player.play()?.catch((e=>{console.error("Error playing audio:",e)})));this.currentIndex=this.shuffle?Math.floor(Math.random()*this.audios.length):e;const s=this.audios[e].source;s&&this.player.elements.container.querySelector("audio")&&(this.player.elements.container.querySelector("audio").src=s,this.playlistTitle&&(this.playlistTitle.textContent=this.audios[this.currentIndex].title),this.playlistArtist&&(this.playlistArtist.textContent=this.audios[this.currentIndex].artist),this.playlistCover&&(this.playlistCover.src=this.audios[this.currentIndex].poster),this.playlistItems.forEach(((e,t)=>{t===this.currentIndex?e.classList.add("item-active"):e.classList.remove("item-active")})),t&&this.player.play()?.catch((e=>{console.error("Error playing audio:",e)})))}next(){this.switchToAudio((this.currentIndex+1)%this.audios.length)}prev(){this.switchToAudio((this.currentIndex-1+this.audios.length)%this.audios.length)}setItemsDuration(){this.playlistItems.forEach(((e,t)=>{const s=document.createElement("audio");e.querySelector(".duration")&&(s.src=this.audios[t]?.source,s.addEventListener("loadedmetadata",(()=>{var t,r,i,a,n;e.querySelector(".duration").innerText=(t=s.duration,n=(r=parseInt(t,10))-3600*(i=Math.floor(r/3600))-60*(a=Math.floor((r-3600*i)/60)),i<10&&(i="0"+i),a<10&&(a="0"+a),n<10&&(n="0"+n),a+":"+n)})))}))}},i=({attributes:i,id:a})=>{const{theme:n,audios:l,hideDownload:o,controls:c,data:d,options:h}=i,u=(0,e.useRef)(),p=(0,e.useRef)();return(0,e.useEffect)((()=>{const e=u.current;if(!e)return;const t=e.querySelector("audio");if(!t)return;const s=new Plyr(t,{controls:Object.keys(c).filter((e=>c[e])),volume:parseInt(h.volume)||.5,storage:{enabled:!0,key:"plyr-narrow"},tooltips:{controls:!0,seek:!0},listeners:{fastForward:e=>{if(d?.forward_rewind_change_audio)return p.current?.next(),!1},rewind:e=>{if(d?.forward_rewind_change_audio)return p.current?.prev(),!1}}});return s.elements.container=u.current,p.current=new r(s,l),s.on("ready",(()=>{s.volume=h.volume})),()=>{s?.destroy()}}),[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{attributes:i,id:a}),(0,t.jsxs)("div",{className:`narrowPlaylist simplePlaylist audioPlaylist theme-${n.toLowerCase()}`,ref:u,children:[(0,t.jsx)("audio",{}),(0,t.jsx)("ul",{children:l.map((({title:e,source:s,artist:r},i)=>(0,t.jsxs)("li",{className:0===i?"item-active":"","data-audio-item":!0,"data-index":i,"data-plyr":"playlist-item",children:[(0,t.jsxs)("span",{className:"plyr__controls__item plyr__control",type:"button","data-plyr":"play","aria-pressed":"false","aria-label":"Play",children:[(0,t.jsx)("svg",{className:"icon--pressed","aria-hidden":"true",focusable:"false",children:(0,t.jsx)("use",{xlinkHref:"#plyr-pause"})}),(0,t.jsx)("svg",{className:"icon--not-pressed","aria-hidden":"true",focusable:"false",children:(0,t.jsx)("use",{xlinkHref:"#plyr-play"})}),(0,t.jsx)("span",{className:"label--pressed plyr__sr-only",children:"Pause"}),(0,t.jsx)("span",{className:"label--not-pressed plyr__sr-only",children:"Play"})]}),(0,t.jsxs)("span",{className:"title",children:[e," "]}),r&&(0,t.jsxs)("span",{className:"artist",children:[" ","  by  ",r," "]}),!o&&(0,t.jsx)("a",{className:"download",download:!0,href:s,children:(0,t.jsx)("svg",{role:"presentation",focusable:"false",children:(0,t.jsx)("use",{href:"#plyr-download"})})})]},i)))})]})]})},{createRoot:a}=ReactDOM;document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".wp-block-h5ap-playlistnarrow").forEach((e=>{const s=JSON.parse(e.dataset.attributes),r=e.dataset.id;a(e).render((0,t.jsx)(i,{attributes:s,id:r})),e.removeAttribute("data-attributes"),e.removeAttribute("data-id")}))}))})();